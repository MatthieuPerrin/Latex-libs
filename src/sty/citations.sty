% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{citations}[2025/06/09 Macros for citations and quotations]






%\newcommand*\quotefont{\fontfamily{LinuxLibertineT-LF}} % selects Libertine as the quote font
%\newcommand*\quotesize{40} % if quote size changes, need a way to make shifts relative


\newcommand\quote@style@quote[1]{\fontfamily{LinuxLibertineT-LF}\fontsize{40}{0}\selectfont#1}
\newcommand\quote@style@name[1]{#1}
\newcommand\quote@style@text[1]{\textit{#1}}
\newcommand\quote@style@width{.85\textwidth}

\newcommand\myquote[3][structure]{%
  \begin{tikzpicture}
    \node[text width=\quote@style@width, align=center] (quote@text) at (0,0) {\quote@style@text{#3}};
    \node[#1, below right=0mm of quote@text.south east, anchor=north east] {\quote@style@name{#2}};
    \node[#1, below left=0mm and 0mm of quote@text.north west, anchor=north east] {\quote@style@quote{``}};
    \node[#1, above right=-6.5mm and 0mm of quote@text.south east, anchor=south west] {\quote@style@quote{''}};
  \end{tikzpicture}
}






\newcommand*{\openquote}
   {\tikz[remember picture,overlay,xshift=-4ex,yshift=-1ex]
   \node (OQ) {\quotefont\fontsize{\quotesize}{\quotesize}\selectfont{\usebeamercolor[fg]{block title}``}};}
\newcommand*{\closequote}[1]
  {\tikz[remember picture,overlay,xshift=4ex,yshift={#1}]
   \node (CQ) {\quotefont\fontsize{\quotesize}{\quotesize}\selectfont\structure{''}};}
\newcommand*\shadedauthorformat{\structure} % define format for the author argument
 
% Now a command to allow left, right and centre alignment of the author
\newcommand*\authoralign[1]{%
  \if#1l
    \def\authorfill{}\def\quotefill{\hfill}
  \else
    \if#1r
      \def\authorfill{\hfill}\def\quotefill{}
    \else
      \if#1c
        \gdef\authorfill{\hfill}\def\quotefill{\hfill}
      \else\typeout{Invalid option}
      \fi
    \fi
  \fi}
% wrap everything in its own environment which takes one argument (author) and one optional argument
% specifying the alignment [l, r or c]
%
 
\newenvironment{shadequote}[2][r]%
{\authoralign{#1}
\ifblank{#2}
   {\def\shadequoteauthor{}\def\yshift{-2ex}\def\quotefill{\hfill}}
   {\def\shadequoteauthor{\par\authorfill\shadedauthorformat{#2}}\def\yshift{2ex}}
   \begin{quote}\openquote}
{\shadequoteauthor\quotefill\closequote{\yshift}\end{quote}}



















%% ==== User-customisable settings ====
%\newcommand*\quotefont{\normalfont}
%\newcommand*\quotesize{3em}
%\newcommand*{\openquotemark}{``}
%\newcommand*{\closequotemark}{''}
%\newcommand*\shadedauthorformat{\structure}
% 
%% ==== Quote opening mark ====
%\newcommand*{\openquote}{
%   \tikz[remember picture,overlay,xshift=-1.5ex,yshift=-0.7ex]
%   \node (OQ) {\quotefont\fontsize{\quotesize}{1em}\selectfont \openquotemark};
%}
% 
%% ==== Quote closing mark ====
%\newcommand*{\closequote}[1]{
%  \tikz[remember picture,overlay,xshift=1.5ex,yshift=#1]
%   \node (CQ) {\quotefont\fontsize{\quotesize}{1em}\selectfont \closequotemark};
%}
% 
%% ==== Author alignment helper ====
%\newcommand*\authoralign[1]{%
%  \def\authorfill{}%
%  \def\quotefill{}%
%  \if#1l\relax
%  \else\if#1r\relax
%    \def\authorfill{\hfill}%
%  \else\if#1c\relax
%    \def\authorfill{\hfill}\def\quotefill{\hfill}%
%  \fi\fi\fi
%}
% 
%% ==== Shadequote environment ====
%\newenvironment{shadequote}[2][r]%
%{%
%  \authoralign{#1}%
%  \def\shadequoteauthor{\par\authorfill\shadedauthorformat{#2}}%
%  \def\yshift{2ex}%
%  \begin{quote}\openquote
%}%
%{%
%  \shadequoteauthor\quotefill\closequote{\yshift}\end{quote}%
%}











































\newcommand\jfile{\scalebox{.7}{\begin{tikzpicture}
  \clip(-.01,-.01) rectangle (.22,.307);
  \draw[structure, fill=structure!20, rounded corners=1] (.21,.227) -- (.21,0) -- (0,0) -- (0,.297) -- (.14,.297);
  \draw[structure, rounded corners=1] (.21,.227) -- (.14,.227) -- (.14,.297);
  \draw[structure]  (.21,.2) -- (.21,.227)  -- (.14,.297) -- (.10, .297);
  \draw[structure]  (.105,.1485) node {\tiny J};
\end{tikzpicture}}}
\newcommand\cfile{\scalebox{.7}{\begin{tikzpicture}
  \clip(-.01,-.01) rectangle (.22,.307);
  \draw[structure, fill=structure!20, rounded corners=1] (.21,.227) -- (.21,0) -- (0,0) -- (0,.297) -- (.14,.297);
  \draw[structure, rounded corners=1] (.21,.227) -- (.14,.227) -- (.14,.297);
  \draw[structure]  (.21,.2) -- (.21,.227)  -- (.14,.297) -- (.10, .297);
  \draw[structure]  (.105,.18) node {\tiny C};
  \draw[structure]  (.105,.08) node {\tiny ++};
\end{tikzpicture}}}
\newcommand\file{\scalebox{.7}{\begin{tikzpicture}
  \clip(-.01,-.01) rectangle (.22,.307);
  \draw[structure, fill=structure!20, rounded corners=1] (.21,.227) -- (.21,0) -- (0,0) -- (0,.297) -- (.14,.297);
  \draw[structure, rounded corners=1] (.21,.227) -- (.14,.227) -- (.14,.297);
  \draw[structure]  (.21,.2) -- (.21,.227)  -- (.14,.297) -- (.10, .297);
  \draw[structure]  (.05,.20) -- (.09,.20);
  \draw[structure]  (.05,.15) -- (.16,.15);
  \draw[structure]  (.05,.10) -- (.16,.10);
  \draw[structure]  (.05,.05) -- (.16,.05);
\end{tikzpicture}}}

\newcommand{\citem}{}
\newcommand{\jitem}{}

\newenvironment{citing}
               {\minipage{\textwidth}\itemize \scriptsize \let\origitem\item
                 \renewcommand{\item}[1][]
                              {\origitem[\file] \structure{##1}}\scriptsize
                 \renewcommand{\jitem}[1][]
                              {\origitem[\jfile] \structure{##1}}\scriptsize
                 \renewcommand{\citem}[1][]
                              {\origitem[\cfile] \structure{##1}}\scriptsize}
               {\enditemize\endminipage}




               

\endinput
