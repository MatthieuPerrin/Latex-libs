
% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{algos}[2025/06/09 Settings for pseudocode and code listings]

\newif\ifAlgos@french\Algos@frenchtrue
\ifnum\language=\csname l@french\endcsname\Algos@frenchtrue\else\Algos@frenchfalse\fi

\newcommand\AlgoFrench{\Algos@frenchtrue\Algos@setFrench}
\newcommand\AlgoEnglish{\Algos@frenchfalse\Algos@setEnglish}

\RequirePackage{xcolor}
\@ifundefinedcolor{structure}{\colorlet{structure}{black}}{}
\@ifundefinedcolor{alert}{\colorlet{alert}{black!50!red}}{}
\@ifundefinedcolor{example}{\colorlet{example}{teal}}{}

\newcommand\ToggleKWStyle{\bfseries\color{structure}}
\newcommand\ToggleFuncStyle{\tt}
\newcommand\ToggleCommentStyle{\color{example}}
\newcommand\ToggleStringStyle{\color{alert}}

\newcommand\KWStyle[1]{{\ToggleKWStyle #1}}
\newcommand\FuncStyle[1]{{\ToggleFuncStyle #1}}
\newcommand\CommentStyle[1]{{\ToggleCommentStyle #1}}



% -------- Listings Configuration --------

\RequirePackage{listings}
\lstset{
  language=java,
  basicstyle=\footnotesize\ttfamily,
  keywordstyle=\ToggleKWStyle,
  stringstyle=\ToggleStringStyle,
  commentstyle=\ToggleCommentStyle,
  showstringspaces=false,
  numbers=none,
  numberstyle=\scriptsize,
  morekeywords={
    specification,
    var
  }
}



% -------- Algorithm2e Configuration --------
\RequirePackage{algorithm2e}
\DontPrintSemicolon

\SetKwSty{KWStyle}
\SetFuncSty{FuncStyle}
\SetCommentSty{CommentStyle}

\newcommand\Algos@setFrench{
  \SetKwProg{Process}{processus}{ :}{}
  \SetKwProg{Algo}{algorithme}{ :}{}
  \SetKwProg{Interface}{interface}{ :}{}
  \SetKwProg{Fun}{fonction}{ :}{}
  \SetKwProg{Proc}{procédure}{ :}{}
  \SetKwProg{Command}{commande}{ :}{}
  \SetKwProg{Event}{événement}{ :}{}
  \SetKwProg{Operation}{opération}{ :}{}
  \SetKwProg{Method}{méthode}{ :}{}
  \SetKwProg{Task}{tâche de fond }{ :}{}
  \SetKwProg{Variables}{variables}{ :}{}
  \SetKwProg{LVariables}{variables locales}{ :}{}
  \SetKwProg{SVariables}{variables partagées}{ :}{}

  \SetKw{Let}{soit}
  \SetKw{Lets}{soient}
  \SetKw{St}{tel que}
  \SetKw{Sts}{tels que}
  \SetKw{Return}{retourner}

  \SetKwIF{If}{ElseIf}{Else}{si}{ :}{sinon si}{sinon :}{}
  \SetKwFor{For}{pour}{ :}{}
  \SetKwFor{While}{tant que}{ :}{}
  \SetKwRepeat{Do}{faire}{tant que}
  \SetKwBlock{Repeat}{répéter :}{}
  \SetKwProg{When}{quand}{ :}{}
  \SetKw{Wait}{attendre que}

  \SetKw{False}{faux}
  \SetKw{True}{vrai}

  \SetKw{Step}{avec un pas de}
  \SetKw{From}{de}
  \SetKw{To}{à}
  \SetKw{By}{par}

  \SetKwFunction{Print}{écrire}
}

\newcommand\Algos@setEnglish{
  \SetKwProg{Process}{process}{ :}{}
  \SetKwProg{Algo}{algorithm}{:}{}
  \SetKwProg{Interface}{interface}{ :}{}
  \SetKwProg{Fun}{function}{:}{}
  \SetKwProg{Proc}{procedure}{:}{}
  \SetKwProg{Command}{command}{ :}{}
  \SetKwProg{Event}{event}{ :}{}
  \SetKwProg{Operation}{operation}{:}{}
  \SetKwProg{Method}{method}{ :}{}
  \SetKwProg{Task}{background task}{:}{}
 
  \SetKwProg{Variables}{variables}{:}{}
  \SetKwProg{LVariables}{local variables}{:}{}
  \SetKwProg{SVariables}{shared variables}{:}{}
 
  \SetKw{Let}{let}
  \SetKw{Lets}{let}
  \SetKw{St}{such that}
  \SetKw{Sts}{such that}
  \SetKw{Return}{return}
 
  \SetKwIF{If}{ElseIf}{Else}{if}{:}{else if}{else:}{}
  \SetKwFor{For}{for}{:}{}
  \SetKwFor{While}{while}{:}{}
  \SetKwRepeat{Do}{do}{while}
  \SetKwBlock{Repeat}{repeat}{}
  \SetKwProg{When}{when}{:}{}
  \SetKw{Wait}{wait until}
 
  \SetKw{False}{false}
  \SetKw{True}{true}
 
  \SetKw{Step}{with step}
  \SetKw{From}{from}
  \SetKw{To}{to}
  \SetKw{By}{by}
 
  \SetKwFunction{Print}{print}
}

\ifAlgos@french\Algos@setFrench\else\Algos@setEnglish\fi

\endinput
